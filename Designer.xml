<project>
    <shortName>Designer</shortName>
    <fullName>Shure Designer</fullName>
    <version>999.0.0.3</version>
    <installerFilename>Shure${product_shortname}_${product_version}_${InstallPackagePlatform}.${platform_exec_suffix}</installerFilename>
    <debugLevel>4</debugLevel>
    <componentList>
        <component>
            <name>Designer</name>
            <description>Designer</description>
            <canBeEdited>1</canBeEdited>
            <selected>1</selected>
            <show>1</show>
            <folderList>
                <folder>
                    <description>win-x64</description>
                    <destination>${system_temp_directory}/DesignerSupportFiles</destination>
                    <name>winx64</name>
                    <platforms>windows-x64</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>win-x64/${FileExecutable}</origin>
                        </distributionFile>
                        <distributionFile>
                            <origin>win-x64/${VCRuntimeExecutable}</origin>
                        </distributionFile>
                    </distributionFileList>
                </folder>
                <folder>
                    <description>mac-x64</description>
                    <destination>${installdir}</destination>
                    <name>macx64</name>
                    <platforms>osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>mac-x64/Shure Designer Desktop.app</origin>
                        </distributionFile>
                    </distributionFileList>
                    <shouldPackRuleList>
                        <compareText>
                            <logic>does_not_equal</logic>
                            <text>${InstallPackagePlatform}</text>
                            <value>Mac-arm64</value>
                        </compareText>
                    </shouldPackRuleList>
                </folder>
                <folder>
                    <description>mac-arm64</description>
                    <destination>${installdir}</destination>
                    <name>macarm64</name>
                    <platforms>osx</platforms>
                    <distributionFileList>
                        <distributionFile>
                            <origin>mac-arm64/Shure Designer Desktop.app</origin>
                        </distributionFile>
                    </distributionFileList>
                    <shouldPackRuleList>
                        <compareText>
                            <logic>does_not_equal</logic>
                            <text>${InstallPackagePlatform}</text>
                            <value>Mac-x64</value>
                        </compareText>
                    </shouldPackRuleList>
                </folder>
            </folderList>
        </component>
    </componentList>
    <preBuildActionList>
        <setInstallerVariable>
            <name>InstallPackagePlatform</name>
            <value>Win-x64</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform_name}</text>
                    <value>windows-x64</value>
                </compareText>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>InstallPackagePlatform</name>
            <value>Mac-x64</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform_name}</text>
                    <value>osx</value>
                </compareText>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${project.osxplatforms}</value1>
                    <value2>osx-x86_64</value2>
                </compareValues>
            </ruleList>
        </setInstallerVariable>
        <setInstallerVariable>
            <name>InstallPackagePlatform</name>
            <value>Mac-arm64</value>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${platform_name}</text>
                    <value>osx</value>
                </compareText>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${project.osxplatforms}</value1>
                    <value2>osx-arm64</value2>
                </compareValues>
            </ruleList>
        </setInstallerVariable>
        <actionGroup>
            <explanation>Win-x64</explanation>
            <actionList>
                <setInstallerVariable>
                    <name>FileExecutable</name>
                    <value>Shure Designer Desktop-x64.exe</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>VCRuntimeExecutable</name>
                    <value>VC_redist.x64.exe</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${InstallPackagePlatform}</value1>
                    <value2>Win-x64</value2>
                </compareValues>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-common</explanation>
            <actionList>
                <setInstallerVariable>
                    <name>executable</name>
                    <value>Shure Designer Desktop.app</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </preBuildActionList>
    <initializationActionList>
        <actionGroup>
            <explanation>win-x64 checks (disabled intentional)</explanation>
            <run>0</run>
            <actionList>
                <throwError>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <text>Processor needs have at least 4 cores.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_cpu_count}</value1>
                            <value2>4</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <throwError>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <text>Processor needs to be atleast 2Ghz</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_cpu_speed}</value1>
                            <value2>2000</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <throwError>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <text>Windows 10 or 11 Profession or Enterprise Versions.</text>
                    <ruleList>
                        <ruleGroup>
                            <ruleList>
                                <platformTest>
                                    <negate>1</negate>
                                    <type>windows-11</type>
                                </platformTest>
                                <platformTest>
                                    <negate>1</negate>
                                    <type>windows-10</type>
                                </platformTest>
                            </ruleList>
                        </ruleGroup>
                        <compareText>
                            <logic>does_not_contain</logic>
                            <text>Professional,Enterprise</text>
                            <value>${windows_os_flavor}</value>
                        </compareText>
                    </ruleList>
                </throwError>
                <throwError>
                    <text>8 Gigbytes are required for Shure Designer.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_total_memory}</value1>
                            <value2>8192</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <showWarning>
                    <text>At least 16GB of RAM is recommended.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_total_memory}</value1>
                            <value2>16384</value2>
                        </compareValues>
                    </ruleList>
                </showWarning>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <actionGroup>
                    <explanation>Check if 4.x or 5.x is running</explanation>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <actionList>
                        <showWarning>
                            <text>There appears to be a 4.x or 5.x version Designer click OK to force a close on this version of Designer. Once OK is pressed, any unsaved work will be discarded.</text>
                        </showWarning>
                        <kill>
                            <name>Shure Designer.exe</name>
                            <showMessageOnError>0</showMessageOnError>
                            <ruleList>
                                <processTest>
                                    <logic>is_running</logic>
                                    <name>Shure Designer.exe</name>
                                </processTest>
                            </ruleList>
                        </kill>
                    </actionList>
                    <ruleList>
                        <processTest>
                            <logic>is_running</logic>
                            <name>Shure Designer.exe</name>
                        </processTest>
                    </ruleList>
                </actionGroup>
                <createTimeStamp>
                    <format>%Y%m%d%H%M%S</format>
                    <variable>time</variable>
                </createTimeStamp>
                <setInstallerVariable>
                    <name>logname</name>
                    <value>installer_${time}.log</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac non-architecture checks (disabled intentionally)</explanation>
            <run>0</run>
            <actionList>
                <throwError>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <text>Processor needs have at least 4 cores.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_cpu_count}</value1>
                            <value2>4</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <throwError>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <text>Processor needs to be atleast 2Ghz</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_cpu_speed}</value1>
                            <value2>2000</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <throwError>
                    <text>8 Gigbytes are required for Shure Designer.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_total_memory}</value1>
                            <value2>8192</value2>
                        </compareValues>
                    </ruleList>
                </throwError>
                <showWarning>
                    <text>At least 16GB of RAM is recommended.</text>
                    <ruleList>
                        <compareValues>
                            <logic>less</logic>
                            <value1>${machine_total_memory}</value1>
                            <value2>16384</value2>
                        </compareValues>
                    </ruleList>
                </showWarning>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-common</explanation>
            <actionList>
                <setInstallerVariableFromScriptOutput>
                    <exec>sudo</exec>
                    <execArgs>-u ${system_username} sysctl -n machdep.cpu.brand_string</execArgs>
                    <name>MacArchitectureTest</name>
                </setInstallerVariableFromScriptOutput>
                <setInstallerVariable>
                    <name>MacArchitecture</name>
                    <value>osx-arm64</value>
                    <ruleList>
                        <compareText logic="does_not_contain" text="${MacArchitectureTest}" value="Intel"/>
                    </ruleList>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>MacArchitecture</name>
                    <value>osx-x86_64</value>
                    <ruleList>
                        <compareText logic="contains" text="${MacArchitectureTest}" value="Intel"/>
                    </ruleList>
                </setInstallerVariable>
                <throwError>
                    <text>There is a version of Shure Designer running. Installer will exit.</text>
                    <ruleList>
                        <processTest>
                            <logic>is_running</logic>
                            <name>Shure Designer Desktop</name>
                        </processTest>
                    </ruleList>
                </throwError>
                <createTimeStamp>
                    <format>%Y%m%d%H%M%S</format>
                    <variable>time</variable>
                </createTimeStamp>
                <setInstallerVariable>
                    <name>logname</name>
                    <value>installer_${time}.log</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-x64</explanation>
            <actionList>
                <throwError>
                    <text>the osx-x64 version is required to install on this platform.</text>
                    <ruleList>
                        <compareText>
                            <logic>does_not_equal</logic>
                            <text>${InstallPackagePlatform}</text>
                            <value>Mac-x64</value>
                        </compareText>
                    </ruleList>
                </throwError>
            </actionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${MacArchitecture}</text>
                    <value>osx-x86_64</value>
                </compareText>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-arm64</explanation>
            <actionList>
                <throwError>
                    <text>the osx-arm64 version is required to install on this platform.</text>
                    <ruleList>
                        <compareText>
                            <logic>does_not_equal</logic>
                            <text>${InstallPackagePlatform}</text>
                            <value>Mac-arm64</value>
                        </compareText>
                    </ruleList>
                </throwError>
            </actionList>
            <ruleList>
                <compareText>
                    <logic>equals</logic>
                    <text>${MacArchitecture}</text>
                    <value>osx-arm64</value>
                </compareText>
            </ruleList>
        </actionGroup>
    </initializationActionList>
    <preInstallationActionList>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <registryGet>
                    <key>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Shure Designer</key>
                    <name>DisplayVersion</name>
                    <variable>PreviousVersion</variable>
                </registryGet>
                <actionGroup>
                    <explanation>Version Check</explanation>
                    <actionList>
                        <setInstallerVariable>
                            <name>NewVersion</name>
                            <value>${project.version}</value>
                        </setInstallerVariable>
                        <throwError>
                            <text>A newer version of Designer, ${PreviousVersion}, is already installed. Installer will exit.</text>
                            <ruleList>
                                <compareVersions>
                                    <logic>greater</logic>
                                    <version1>${PreviousVersion}</version1>
                                    <version2>${NewVersion}</version2>
                                </compareVersions>
                            </ruleList>
                        </throwError>
                        <showQuestion>
                            <default>yes</default>
                            <text>The previous version must be uninstalled to install new version. Would you like to continue?</text>
                            <variable>UninstallPreviousVersion</variable>
                        </showQuestion>
                        <exit>
                            <exitCode>1</exitCode>
                            <ruleList>
                                <compareText>
                                    <logic>equals</logic>
                                    <text>${UninstallPreviousVersion}</text>
                                    <value>no</value>
                                </compareText>
                            </ruleList>
                        </exit>
                        <setInstallerVariable>
                            <name>project.installationType</name>
                            <value>upgrade</value>
                        </setInstallerVariable>
                    </actionList>
                    <ruleList>
                        <stringTest>
                            <text>${PreviousVersion}</text>
                            <type>not_empty</type>
                        </stringTest>
                    </ruleList>
                </actionGroup>
                <setInstallerVariable>
                    <name>VCRuntimeExecutable</name>
                    <value>VC_redist.x64.exe</value>
                </setInstallerVariable>
                <setInstallerVariable>
                    <name>FileExecutable</name>
                    <value>Shure Designer Desktop-x64.exe</value>
                </setInstallerVariable>
                <unpackFile>
                    <addToUninstaller>0</addToUninstaller>
                    <component>Designer</component>
                    <destination>${system_temp_directory}\</destination>
                    <folder>winx64</folder>
                    <origin>${VCRuntimeExecutable}</origin>
                </unpackFile>
                <unpackFile>
                    <addToUninstaller>0</addToUninstaller>
                    <component>Designer</component>
                    <destination>${system_temp_directory}\</destination>
                    <folder>winx64</folder>
                    <origin>${FileExecutable}</origin>
                </unpackFile>
                <setInstallerVariable>
                    <name>LogFilePath</name>
                    <value>${windows_folder_local_appdata}\Shure\${product_fullname}\Logs\Installer</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-common</explanation>
            <actionList>
                <setInstallerVariable>
                    <name>LogFilePath</name>
                    <value>${user_home_directory}/Library/Logs/Shure/${product_fullname}</value>
                </setInstallerVariable>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </preInstallationActionList>
    <readyToInstallActionList>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <createDirectory>
                    <path>${LogFilePath}</path>
                </createDirectory>
                <setInstallerVariableFromScriptOutput>
                    <exec>cmd.exe</exec>
                    <execArgs>/c start "" /wait "${windows_folder_local_appdata}\Programs\shure.designer-desktop\${UninstallFilename}" /S &amp; echo %ERRORLEVEL%</execArgs>
                    <name>ExecutableOutput</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <stringTest>
                            <text>${PreviousVersion}</text>
                            <type>not_empty</type>
                        </stringTest>
                    </ruleList>
                </setInstallerVariableFromScriptOutput>
                <throwError>
                    <text>Need at least 5GB of free disk space</text>
                    <ruleList>
                        <checkFreeDiskSpace>
                            <logic>less</logic>
                            <path>${install_dir}</path>
                            <size>5</size>
                            <units>GB</units>
                        </checkFreeDiskSpace>
                    </ruleList>
                </throwError>
                <registryGet>
                    <key>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\X64</key>
                    <name>Version</name>
                    <variable>InstalledVCRuntimeVersion</variable>
                </registryGet>
                <actionGroup>
                    <explanation>FormatPreviousVersionOfRuntimeVersion</explanation>
                    <actionList>
                        <registryGet>
                            <key>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\X64</key>
                            <name>Major</name>
                            <variable>PreviousRuntimeMajor</variable>
                        </registryGet>
                        <registryGet>
                            <key>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\X64</key>
                            <name>Minor</name>
                            <variable>PreviousRuntimeMinor</variable>
                        </registryGet>
                        <registryGet>
                            <key>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\X64</key>
                            <name>Bld</name>
                            <variable>PreviousRuntimeBld</variable>
                        </registryGet>
                        <registryGet>
                            <key>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\14.0\VC\Runtimes\X64</key>
                            <name>Rbld</name>
                            <variable>PreviousRuntimeRbld</variable>
                        </registryGet>
                        <setInstallerVariable>
                            <name>InstalledVCRuntimeVersion</name>
                            <value>${PreviousRuntimeMajor}.${PreviousRuntimeMinor}.${PreviousRuntimeBld}.${PreviousRuntimeRbld}</value>
                        </setInstallerVariable>
                    </actionList>
                    <ruleList>
                        <stringTest>
                            <text>${InstalledVCRuntimeVersion}</text>
                            <type>not_empty</type>
                        </stringTest>
                    </ruleList>
                </actionGroup>
                <getWindowsFileVersionInfo>
                    <path>${system_temp_directory}\${VCRuntimeExecutable}</path>
                    <type>version</type>
                    <variable>VCRuntimeNewVersionNumber</variable>
                </getWindowsFileVersionInfo>
                <createTimeStamp>
                    <format>%Y%m%d%h%M%s</format>
                    <variable>timestamp</variable>
                </createTimeStamp>
                <setInstallerVariableFromScriptOutput>
                    <exec>${system_temp_directory}\${VCRuntimeExecutable}</exec>
                    <execArgs>/q /install /norestart /log "${installdir}\logs\${VCRuntimeExecutable}-${timestamp}.log"</execArgs>
                    <name>RuntimeExitCode</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <stringTest>
                            <text>${InstalledVCRuntimeVersion}</text>
                            <type>empty</type>
                        </stringTest>
                        <compareVersions>
                            <logic>less</logic>
                            <version1>${InstalledVCRuntimeVersion}</version1>
                            <version2>${VCRuntimeNewVersionNumber}</version2>
                        </compareVersions>
                    </ruleList>
                </setInstallerVariableFromScriptOutput>
                <setInstallerVariableFromScriptOutput>
                    <exec>cmd.exe</exec>
                    <execArgs>/c start "" /wait "${system_temp_directory}\${FileExecutable}" /S &amp; echo %ERRORLEVEL%</execArgs>
                    <name>ExecutableOutput</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                </setInstallerVariableFromScriptOutput>
                <deleteFile>
                    <path>${system_temp_directory}\${FileExecutable}</path>
                </deleteFile>
                <deleteFile>
                    <path>${system_temp_directory}\${VCRuntimeExecutable}</path>
                </deleteFile>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-common</explanation>
            <actionList>
                <createDirectory>
                    <path>${LogFilePath}</path>
                </createDirectory>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </readyToInstallActionList>
    <preUninstallationActionList>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <showQuestion>
                    <default>no</default>
                    <text>Would you like to permanently remove Shure Designer related user preferences and log files?</text>
                    <variable>UserSpecificFiles</variable>
                </showQuestion>
                <actionGroup>
                    <explanation>Delete user specific files</explanation>
                    <actionList>
                        <deleteFile>
                            <path>${windows_folder_appdata}\shure.designer-desktop\User\settings.json</path>
                        </deleteFile>
                        <deleteFile>
                            <path>${windows_folder_appdata}\shure.designer-desktop\system-api\data\logs</path>
                        </deleteFile>
                        <deleteFile>
                            <path>${windows_folder_appdata}\shure.designer-desktop\Local Storage\leveldb\MANIFEST-000001</path>
                        </deleteFile>
                    </actionList>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${UserSpecificFiles}</text>
                            <value>yes</value>
                        </compareText>
                    </ruleList>
                </actionGroup>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
        <actionGroup>
            <explanation>mac-common</explanation>
            <actionList>
                <showQuestion>
                    <default>yes</default>
                    <text>Would you like to permanently remove Shure Designer related user preferences and log files?</text>
                    <variable>UserSpecificFiles</variable>
                </showQuestion>
                <actionGroup>
                    <explanation>Delete user specific files</explanation>
                    <actionList>
                        <deleteFile>
                            <path>${user_home_directory}/Library/Application Support/shure.designer-desktop/system-api/data/logs</path>
                        </deleteFile>
                        <deleteFile>
                            <path>${user_home_directory}/Library/Application Support/shure.designer-desktop/User/settings.json</path>
                        </deleteFile>
                        <deleteFile>
                            <path>${user_home_directory}/Library/Application Support/shure.designer-desktop/Local Storage/leveldb/MANIFEST-000001</path>
                        </deleteFile>
                    </actionList>
                    <ruleList>
                        <compareText>
                            <logic>equals</logic>
                            <text>${UserSpecificFiles}</text>
                            <value>yes</value>
                        </compareText>
                    </ruleList>
                </actionGroup>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </preUninstallationActionList>
    <postUninstallationActionList>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <setInstallerVariableFromScriptOutput>
                    <exec>cmd.exe</exec>
                    <execArgs>/c start "" /wait "${windows_folder_local_appdata}\Programs\shure.designer-desktop\${UninstallFilename}" /S &amp; echo %ERRORLEVEL%</execArgs>
                    <name>ExecutableOutput</name>
                    <ruleEvaluationLogic>or</ruleEvaluationLogic>
                    <ruleList>
                        <stringTest>
                            <text>${PreviousVersion}</text>
                            <type>not_empty</type>
                        </stringTest>
                    </ruleList>
                </setInstallerVariableFromScriptOutput>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </postUninstallationActionList>
    <enableDebugger>1</enableDebugger>
    <enableRollback>0</enableRollback>
    <enableTimestamp>1</enableTimestamp>
    <installationLogFile>${LogFilePath}/${logname}</installationLogFile>
    <logFileTimeStampFormat>%Y-%m-%dT%H:%M:%SZ</logFileTimeStampFormat>
    <osxApplicationBundleIdentifier>com.shure.designer-${InstallerPackagePlatform}</osxApplicationBundleIdentifier>
    <osxPlatforms>osx-arm64</osxPlatforms>
    <outputDirectory>${build_project_directory}/output</outputDirectory>
    <saveRelativePaths>1</saveRelativePaths>
    <vendor>Shure Incorporated</vendor>
    <windowsARPRegistryPrefix>${project.fullName}</windowsARPRegistryPrefix>
    <windowsExecutableIcon>\Users\Exsilio\Desktop\DNG\icon\dng-app-icon-64.ico</windowsExecutableIcon>
    <windowsUninstallerExecutableIcon>\Users\Exsilio\Desktop\DNG\icon\dng-app-icon-64.ico</windowsUninstallerExecutableIcon>
    <finalPageActionList>
        <createShortcuts>
            <destination>${windows_folder_desktopdirectory}</destination>
            <progressText>Create a desktop shortcut</progressText>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
            <shortcutList>
                <shortcut>
                    <comment>Launches ${project.fullName}</comment>
                    <exec></exec>
                    <icon></icon>
                    <name>Launch ${project.fullName}</name>
                    <path></path>
                    <platforms>all</platforms>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${executable}</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath></windowsPath>
                </shortcut>
            </shortcutList>
        </createShortcuts>
        <createShortcuts>
            <destination>${windows_folder_common_programs}\Designer</destination>
            <progressText>Add to start menu</progressText>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
            <shortcutList>
                <shortcut>
                    <comment>Launches ${project.fullName}</comment>
                    <exec></exec>
                    <icon></icon>
                    <name>Launch ${project.fullName}</name>
                    <path></path>
                    <platforms>all</platforms>
                    <runAsAdmin>0</runAsAdmin>
                    <runInTerminal>0</runInTerminal>
                    <windowsExec>${executable}</windowsExec>
                    <windowsExecArgs></windowsExecArgs>
                    <windowsIcon></windowsIcon>
                    <windowsPath></windowsPath>
                </shortcut>
            </shortcutList>
        </createShortcuts>
        <runProgram>
            <program>${executable}</program>
            <programArguments></programArguments>
            <progressText>Open Shure Designer Desktop</progressText>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </runProgram>
        <createSymLink linkName="${user_home_directory}/Desktop/Designer.app" target="${Installdir}/${executable}">
            <progressText>Create desktop shortcut</progressText>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </createSymLink>
        <setInstallerVariable>
            <name>AddToDock</name>
            <progressText>Add to Dock (Dock will restart)</progressText>
            <value>yes</value>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </setInstallerVariable>
        <runProgram>
            <program>sudo</program>
            <programArguments>-u ${system_username} defaults write com.apple.dock persistent-apps -array-add '&lt;dict&gt;&lt;key&gt;tile-data&lt;/key&gt;&lt;dict&gt;&lt;key&gt;file-data&lt;/key&gt;&lt;dict&gt;&lt;key&gt;_CFURLString&lt;/key&gt;&lt;string&gt;/Applications/Shure/Designer/Shure Designer Desktop.app&lt;/string&gt;&lt;key&gt;_CFURLStringType&lt;/key&gt;&lt;integer&gt;0&lt;/integer&gt;&lt;/dict&gt;&lt;/dict&gt;&lt;/dict&gt;'</programArguments>
            <show>0</show>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${AddToDock}</value1>
                    <value2>yes</value2>
                </compareValues>
            </ruleList>
        </runProgram>
        <runProgram>
            <program>killall</program>
            <programArguments>Dock</programArguments>
            <show>0</show>
            <ruleList>
                <compareValues>
                    <logic>equals</logic>
                    <value1>${AddToDock}</value1>
                    <value2>yes</value2>
                </compareValues>
            </ruleList>
        </runProgram>
        <runProgram>
            <program>open</program>
            <programArguments>-a "Shure Designer Desktop"</programArguments>
            <progressText>Open Designer</progressText>
            <ruleList>
                <platformTest>
                    <type>osx</type>
                </platformTest>
            </ruleList>
        </runProgram>
    </finalPageActionList>
    <installationAbortedActionList>
        <actionGroup>
            <explanation>win-x64</explanation>
            <actionList>
                <deleteFile>
                    <path>${system_temp_directory}\${FileExecutable}</path>
                </deleteFile>
                <deleteFile>
                    <path>${system_temp_directory}\${VCRuntimeExecutable}</path>
                    <ruleList>
                        <platformTest>
                            <type>windows-x64</type>
                        </platformTest>
                    </ruleList>
                </deleteFile>
            </actionList>
            <ruleList>
                <platformTest>
                    <type>windows-x64</type>
                </platformTest>
            </ruleList>
        </actionGroup>
    </installationAbortedActionList>
    <parameterList>
        <stringParameter>
            <name>FileExecutable</name>
            <description></description>
            <explanation></explanation>
            <value>Shure Designer Desktop-x64.exe</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <cliOptionShow>0</cliOptionShow>
            <width>40</width>
        </stringParameter>
        <stringParameter>
            <name>InstallPackagePlatform</name>
            <description></description>
            <explanation></explanation>
            <value>windows-x64</value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <cliOptionShow>0</cliOptionShow>
            <width>40</width>
        </stringParameter>
        <directoryParameter>
            <name>installdir</name>
            <description>Installer.Parameter.installdir.description</description>
            <explanation>Installer.Parameter.installdir.explanation</explanation>
            <value></value>
            <default>${platform_install_prefix}/Shure/${project.ShortName}</default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <cliOptionName>prefix</cliOptionName>
            <cliOptionShow>0</cliOptionShow>
            <mustBeWritable>1</mustBeWritable>
            <mustExist>0</mustExist>
            <width>40</width>
        </directoryParameter>
        <stringParameter>
            <name>UninstallFilename</name>
            <description></description>
            <explanation></explanation>
            <value>Uninstall Shure Designer Desktop.exe</value>
            <default></default>
            <allowEmptyValue>0</allowEmptyValue>
            <ask>0</ask>
            <cliOptionShow>0</cliOptionShow>
            <width>40</width>
        </stringParameter>
        <stringParameter>
            <name>executable</name>
            <description></description>
            <explanation></explanation>
            <value>${windows_folder_local_appdata}\Programs\shure.designer-desktop\Shure Designer Desktop.exe</value>
            <default></default>
            <allowEmptyValue>1</allowEmptyValue>
            <ask>0</ask>
            <width>40</width>
        </stringParameter>
    </parameterList>
    <platformOptionsList>
        <platformOptions>
            <platform>osx</platform>
            <uninstallerDirectory>${installdir}</uninstallerDirectory>
        </platformOptions>
        <platformOptions>
            <platform>windows</platform>
        </platformOptions>
    </platformOptionsList>
</project>

